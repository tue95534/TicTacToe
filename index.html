<!DOCTYPE html>
<html>
<head>
    <title>Tic-Tac-Toe</title>
    <style>
        .pp {
            display: inline-flex; height: 100px; width: 100px; border: 2px solid; background-color: gray; vertical-align: middle;
            top:0px; text-align: center; justify-content: center; justify-items: center; align-items: center; margin: 10px;
            font-size: 75px; box-shadow: 10px 5px 5px red; font-family: "Comic Sans MS", "Comic Sans", cursive;
        }
        
        .again {
            height: 50px;
            width: max-content;
            border: 2px solid;
            position: relative;
            margin: auto;
            margin-left: 145px;
            background-image: linear-gradient(red, yellow);
            /*display: block;*/
        }
        
        .board {
            max-width: max-content; margin-left: auto; margin-right: auto;
        }
        
        body {
            background-image: linear-gradient(darkblue, white);
            background-repeat: no-repeat;
        }
        
        #win {
            
            width: 350px;
            margin-left: 8px;
            text-align: center;
            position: absolute;
            font-family: "Comic Sans MS", "Comic Sans", Sans-Serif;
        }
        
        header {
            display: flex;
            justify-content: center; text-align: canter;
            max-width: max-content;
            margin-left: auto; margin-right: auto;
            font-family: "Comic Sans MS", "Comic Sans", cursive;
        }
    </style>
    
</head>


<body>
    <header>
        <h1>Tic-Tac-Toe!</h1>
    </header>
    
    <div class="board">
        <button id="11" onclick="myFunction(this.id)" class="pp">_</button> <button id="12" onclick="myFunction(this.id)" class="pp">_</button> <button id="13" onclick="myFunction(this.id)" class="pp">_</button> <br>
        <button id="21" onclick="myFunction(this.id)" class="pp">_</button> <button id="22" onclick="myFunction(this.id)" class="pp">_</button> <button id="23" onclick="myFunction(this.id)" class="pp">_</button> <br>
        <button id="31" onclick="myFunction(this.id)" class="pp">_</button> <button id="32" onclick="myFunction(this.id)" class="pp">_</button> <button id="33" onclick="myFunction(this.id)" class="pp">_</button> <br>
        
        <h1 id="win">  </h1>
        <br> <br><br><br>
        <button id="again" onclick="restart()" class="again">Play again</button>
    </div>
    
    
    <script>
    function gameCheck() {
        for (x = 1; x < 4; x++) {
            var rowid = "";
            for (y = 1; y < 4; y++) {
                var z = ""; z+= x; z+= y;
                rowid += document.getElementById(z).innerHTML;
            }
            if (rowid == "XXX" || rowid == "OOO"){
                    return true;
                } 
        }
        
        for (y = 1; y < 4; y++) {
            var rowid = "";
            for (x = 1; x < 4; x++) {
                var z = ""; z+= x; z+= y;
                rowid += document.getElementById(z).innerHTML;
            }
            if (rowid == "XXX" || rowid == "OOO"){
                    return true;
                } 
        }
        
        rowid = "";
        for (x = 1; x < 4; x++) {
            var z = ""; z+= x; z+= 4-x;
            rowid += document.getElementById(z).innerHTML;
        }
        if (rowid == "XXX" || rowid == "OOO"){
                return true;
        } 
        
        rowid = "";
        for (x = 1; x < 4; x++) {
            var z = ""; z+= x; z+= x;
            rowid += document.getElementById(z).innerHTML;
        }
        if (rowid == "XXX" || rowid == "OOO"){
                return true;
        }
            
        return false;
    }
    
    function tie() {
        var boardid = "";
        for (x = 1; x < 4; x++) {
            for (y = 1; y < 4; y++) {
                var z = ""; z+= x; z+= y;
                boardid += document.getElementById(z).innerHTML;
            }
        }
        if (boardid.includes("_")) {false;}
        else {return true;}
    }
    
    function restart() {
        for (x = 1; x < 4; x++){
            for (y = 1; y < 4; y++) {
                var z = ""; z+= x; z+= y;
                document.getElementById(z).innerHTML = "_";
            }
        }
        document.getElementById("win").innerHTML = "";
        var btnArray = document.getElementsByClassName("pp");
        for (x = 0; btnArray.length; x++) {
            var elidd = btnArray[x].getAttribute('id');
            btnArray[x].setAttribute( "onClick", "javascript: myFunction(this.id);" );
        }
    }
    
    function myFunction(idd) {
        if (document.getElementById(idd).innerHTML == "_"){
            document.getElementById(idd).innerHTML = "X";
            if (gameCheck() == true) {
                winEnd();
            }
            else if (tie() == true) {
                tieEnd();
            }
            
            if (computerWinH()) {
                loseEnd();
            }
            else if (computerWinV()) {
                loseEnd();
            }
            else if (computerWinD()) {
                loseEnd();
            }
            else if (computerDefenseH()) {
                if (tie() == true) {tieEnd();}
            }
            else if (computerDefenseV()) {
                if (tie() == true) {tieEnd();}
            }
            else if (computerDefenseD()) {
                if (tie() == true) {tieEnd();}
            }
            else {
                if (document.getElementById(22).innerHTML == "_") {
                    document.getElementById(22).innerHTML = "O";
                    var played = true;
                }
                if (!played) {
                    outerloop:
                    for (x = 1; x < 4; x++){
                        for (y = 1; y < 4; y++) {
                            var z = ""; z+= x; z+= y;
                            if (document.getElementById(z).innerHTML == "_") {
                                document.getElementById(z).innerHTML = "O";
                                break outerloop;
                            }
                        }
                    }
                }
            }
        }
    }
    
    function winEnd() {
        document.getElementById("win").innerHTML = "You won!";
        var btnArray = document.getElementsByClassName("pp");
            for (x = 0; btnArray.length; x++) {
                btnArray[x].setAttribute( "onClick", "javascript: end();" );
            }
    }
    
    function loseEnd() {
        document.getElementById("win").innerHTML = "You lost!";
        var btnArray = document.getElementsByClassName("pp");
        for (x = 0; btnArray.length; x++) {
            btnArray[x].setAttribute( "onClick", "javascript: end();" );
        }
    }
    
    function tieEnd() {
        document.getElementById("win").innerHTML = "You tied!";
        var btnArray = document.getElementsByClassName("pp");
            for (x = 0; btnArray.length; x++) {
                btnArray[x].setAttribute( "onClick", "javascript: end();" );
            }
    }
    
    
    function end() {
        var h = true;
    }
    
    function computerWinH() {
        for (x = 1; x < 4; x++) {
            var rowid = "";
            for (y = 1; y < 4; y++) {
                var z = ""; z+= x; z+= y;
                rowid += document.getElementById(z).innerHTML;
            }
            if (rowid == "OO_"){
                var z = ""; z+= x; z+= 3;
                document.getElementById(z).innerHTML = "O";   
                return true;
                } 
            else if (rowid == "O_O"){
                var z = ""; z+= x; z+= 2;
                document.getElementById(z).innerHTML = "O";   
                return true;
                }
            else if (rowid == "_OO"){
                var z = ""; z+= x; z+= 1;
                document.getElementById(z).innerHTML = "O";   
                return true;
                }
        }
        return false;
    }
    function computerWinV() {
        for (y = 1; y < 4; y++) {
            var rowid = "";
            for (x = 1; x < 4; x++) {
                var z = ""; z+= x; z+= y;
                rowid += document.getElementById(z).innerHTML;
            }
            if (rowid == "OO_"){
                var z = ""; z+= 3; z+= y;
                document.getElementById(z).innerHTML = "O";   
                return true;
                } 
            else if (rowid == "O_O"){
                var z = ""; z+= 2; z+= y;
                document.getElementById(z).innerHTML = "O";   
                return true;
                }
            else if (rowid == "_OO"){
                var z = ""; z+= 1; z+= y;
                document.getElementById(z).innerHTML = "O";   
                return true;
                } 
        }
        return false;
    }
    function computerWinD() {
        var rowid = "";
        for (x=1; x<4; x++) {
            var z = ""; z+=x; z+=x;
            rowid += document.getElementById(z).innerHTML;  
        }
        if (rowid == "OO_"){
            var z = "33";
            document.getElementById(z).innerHTML = "O";   
            return true;
            } 
        else if (rowid == "O_O"){
            var z = "22"; 
            document.getElementById(z).innerHTML = "O";   
            return true;
            }
        else if (rowid == "_OO"){
            var z = "11";
            document.getElementById(z).innerHTML = "O";   
            return true;
            } 
        
        rowid = "";
        for (x=1; x<4; x++) { 
            var z = ""; z+= x; z+=(4-x);
            rowid += document.getElementById(z).innerHTML; 
        }
        
        if (rowid == "OO_"){
            var z = "31";
            document.getElementById(z).innerHTML = "O";   
            return true;
            } 
        else if (rowid == "O_O"){
            var z = "22";
            document.getElementById(z).innerHTML = "O";   
            return true;
            }
        else if (rowid == "_OO"){
            var z = "13";
            document.getElementById(z).innerHTML = "O";   
            return true;
            }
        else {
            return false;
        }
    }
    
    function computerDefenseH() {
        for (x = 1; x < 4; x++) {
            var rowid = "";
            for (y = 1; y < 4; y++) {
                var z = ""; z+= x; z+= y;
                rowid += document.getElementById(z).innerHTML;
            }
            if (rowid == "XX_"){
                var z = ""; z+= x; z+= 3;
                document.getElementById(z).innerHTML = "O";   
                return true;
                } 
            else if (rowid == "X_X"){
                var z = ""; z+= x; z+= 2;
                document.getElementById(z).innerHTML = "O";   
                return true;
                }
            else if (rowid == "_XX"){
                var z = ""; z+= x; z+= 1;
                document.getElementById(z).innerHTML = "O";   
                return true;
                }
        }
        return false;
    }
    function computerDefenseV() {
        for (y = 1; y < 4; y++) {
            var rowid = "";
            for (x = 1; x < 4; x++) {
                var z = ""; z+= x; z+= y;
                rowid += document.getElementById(z).innerHTML;
            }
            if (rowid == "XX_"){
                var z = ""; z+= 3; z+= y;
                document.getElementById(z).innerHTML = "O";   
                return true;
                } 
            else if (rowid == "X_X"){
                var z = ""; z+= 2; z+= y;
                document.getElementById(z).innerHTML = "O";   
                return true;
                }
            else if (rowid == "_XX"){
                var z = ""; z+= 1; z+= y;
                document.getElementById(z).innerHTML = "O";   
                return true;
                } 
        }
        return false;
    }
    function computerDefenseD() {
        var rowid = "";
        for (x=1; x<4; x++) {
            var z = ""; z+=x; z+=x;
            rowid += document.getElementById(z).innerHTML;  
        }
        if (rowid == "XX_"){
            var z = "33";
            document.getElementById(z).innerHTML = "O";   
            return true;
            } 
        else if (rowid == "X_X"){
            var z = "22"; 
            document.getElementById(z).innerHTML = "O";   
            return true;
            }
        else if (rowid == "_XX"){
            var z = "11";
            document.getElementById(z).innerHTML = "O";   
            return true;
            } 
        
        rowid = "";
        for (x=1; x<4; x++) { 
            var z = ""; z+= x; z+=(4-x);
            rowid += document.getElementById(z).innerHTML; 
        }
        
        if (rowid == "XX_"){
            var z = "31";
            document.getElementById(z).innerHTML = "O";   
            return true;
            } 
        else if (rowid == "X_X"){
            var z = "22";
            document.getElementById(z).innerHTML = "O";   
            return true;
            }
        else if (rowid == "_XX"){
            var z = "13";
            document.getElementById(z).innerHTML = "O";   
            return true;
            }
        else {
            return false;
        }
    }
    
    </script>
</body>
</html>


